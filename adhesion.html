<!DOCTYPE html>
<html lang="fr">
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participez à la vie de notre communauté sénégalaise à Amiens · ASA L'Association</title>

    <!-- SEO -->
    <meta name="description" content="Formulaire d’adhésion à l’Association des Sénégalais d’Amiens (ASA) : Associations Sénégalaises en France.">
    <meta name="robots" content="noindex, follow">
    <link rel="canonical" href="https://asso-asa.github.io/asa/annuaire-des-associations-senegalaises-en-france.html">

    <!-- Favicon -->
    <link rel="icon" href="/asa/favicon.png" type="image/png"/>     
    <link rel="icon" href="/asa/img/favicon-32x32.png" sizes="32x32" type="image/png"/>
    <link rel="icon" href="/asa/img/favicon-16x16.png" sizes="16x16" type="image/png"/>

    <!-- Couleur de la barre du navigateur (Android) -->
    <meta name="theme-color" content="#00853F">

    <!-- Theme color adaptative (mode clair/sombre) -->
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#00853F">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000">

    <!-- Pour Safari iOS (mode web app) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph -->
    <meta property="og:title" content="Formulaire d’adhésion  à l'Association des Sénégalais d'Amiens (ASA) · ASA L'Association">
    <meta property="og:description" content="Association des Sénégalais d'Amiens (ASA).">
    <meta property="og:image" content="https://asso-asa.github.io/asa/img/logotype-asa-1200x630.png">
    <meta property="og:url" content="https://asa.org/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Formulaire d’adhésion  à l'Association des Sénégalais d'Amiens (ASA) · ASA L'Association">
    <meta name="twitter:description" content="Association des Sénégalais d'Amiens (ASA)">
    <meta name="twitter:image" content="https://asso-asa.github.io/asa/img/logotype-asa-1200x630.png">

    <!--  Icône utilisée quand un utilisateur ajoute la page à son écran d’accueil sur un iPhone/iPad. -->
    <link rel="apple-touch-icon" sizes="180x180"
    href="/asa/img/TILBILO-logo-180x180.png">

    <!-- Web App Manifest -->
    <link rel="manifest" href="/asa/manifest.json">

    <!-- CSS externe -->
    <link rel="stylesheet" href="/asa/style.css">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  </head>

  <!-------------BODY------------------------BODY-----------------------------BODY----------------------->  
  <body>
    <div class="bg-light container mt-5 mb-5 form-container p-4 shadow rounded">
      <img class="img-fluid mx-auto d-block mon-image" src="https://res.cloudinary.com/dcjlu0ems/image/upload/v1737277427/logo_asa_2025.png" alt="Logo de ASA">
      <hr/>
      <h2 class="text-center mb-5 mt-5 2text-primary mon-titre">Participez à la vie de notre communauté sénégalaise à Amiens : Formulaire de demande</h2>

      <p>Ce formulaire vise à verifier l'identité des futurs membres de l'Association afin d'assurer un espace d'échange sécurisé et convivial.</p>
      <p><strong>Pour rejoindre notre communauté, merci de compléter ce formulaire en renseignant vos informations personnelles.</strong></p>
      <p style="color: red;"><em>Ces données seront traitées en toute confidentialité et utilisées exclusivement pour valider votre inscription.</em></p> 
      <hr/>
      <form id="asaForm">
        <div class="form-group mb-3">
          <label class="form-label" for="prenom">Prénom·s
            <span class="text-danger" title="Ce champ est requis.">*</span>
          </label>
          <input type="text" class="form-control" id="prenom" name="prenom" required>
        </div>

        <div class="form-group mb-3">
          <label class="form-label" for="nom">Nom
            <span class="text-danger" title="Ce champ est requis.">*</span>
          </label>
          <input type="text" class="form-control" id="nom" name="nom" required>
        </div>

        <div class="form-group mb-3">
          <label class="form-label" for="telephone">Numéro de téléphone
            <span class="text-danger" title="Ce champ est requis.">*</span>
          </label>
          <input type="tel" maxlength="14" placeholder="06 12 34 56 78" class="form-control" id="telephone" name="telephone" required>
          <p><font size="2">Veuillez saisir le numéro de téléphone associé à votre compte WhatsApp.</font></p>
        </div>

        <div class="form-group mb-3">
          <label class="form-label" for="email">Adresse e-mail</label>
          <input type="email" class="form-control" id="email" name="email">
          <p><font size="2">Veuillez entrer une adresse e-mail valide (facultatif).</font></p>
        </div>
        <h4 class="mt-4">Justificatif de résidence</h4>
        <p><font size="2">Nous avons besoin d'un justificatif prouvant que vous êtes<strong> Sénégalais·e résidant·e à Amiens (ou dans les départements de l'Aisne [02], de l'Oise [60] ou de la Somme [80])</strong>. Veuillez téléverser l'un des documents suivants :</font></p>
        <ul>
        <font size="2">
          <li><strong>les étudiants :</strong> une carte d'étudiant ou un certificat d'inscription.</li>
          <li><strong>pour les non-étudiants :</strong> un document justifiant votre résidence dans la Somme, l'Aisne ou l'Oise (exemple : facture récente, attestation de logement, quittance de loyer, ou justificatif d'identité avec adresse).</li>
        </font>
        </ul>
        <p class="text-danger"> <font size="2"><em>Ces documents resteront strictement confidentiels et ne seront utilisés qu'à des fins de vérification dans le cadre de votre inscription au groupe WhatsApp de l'ASA. Pour la vérification, seuls le nom et le prénom sont requis ; le reste peut être masqué.</em></font></p>
        <div class="form-group mb-3">
          <label class="form-label" for="justificatif">Téléverser le justificatif de résidence
            <span class="text-danger" title="Ce champ est requis.">*</span>
          </label>
          <input type="file" class="form-control" id="justificatif" name="justificatif" required>
        </div>

        <div class="form-group mb-3 mt-4">
          <label class="form-label" for="commentaires">Commentaires ou précisions (facultatif)</label>
          <textarea class="form-control" id="commentaires" name="commentaires"  rows="5"></textarea>
          <p><font size="2">Si vous souhaitez ajouter une précision, utilisez cet espace.</font></p>

        </div>
        <h4 class="mt-4">Traitement des données personnelles</h4>

        <p><font size="2">Conformément au Règlement Général sur la Protection des Données (RGPD) et à la législation française relative à la protection des données, nous vous informons que :</font></p>
        <ul>
          <font size="2">
          <li>L'Association des Sénégalais d'Amiens est l'unique destinataire des données recueillies dans ce formulaire.</li>
          <li>Les informations recueillies via ce formulaire sont strictement confidentielles et seront utilisées uniquement pour vérifier votre identité et vous intégrer au groupe WhatsApp de l'ASA, ainsi que pour les communications internes de l'Association.</li>
          <li>Les données seront conservées uniquement pendant la durée nécessaire à la vérification, après quoi elles seront supprimées de manière sécurisée.</li>
          <li>Vous disposez d'un droit d'accès, de rectification, de limitation, d'opposition, et de suppression des données vous concernant. Pour exercer ces droits, vous pouvez nous contacter à l'adresse suivante : <a href="mailto:associationsenegalaisdamiens@gmail.com">associationsenegalaisdamiens@gmail.com</a>.</li>
          <li>En soumettant ce formulaire, vous consentez au traitement de vos données conformément à ces conditions.</li>
          </font>
        </ul>
      <h5 class="h5">Consentement au traitement des données personnelles
        <span class="text-danger" title="Ce champ est requis.">*</span>
      </h5>
        <div class="form-group form-check mb-3">
          <input type="checkbox" class="form-check-input" id="consentement" name="consentement" value="Oui" required>
          <label class="form-check-label text-primary" for="consentement">J'ai pris connaissance des conditions de traitement de mes données personnelles et j'y consens.</label>
        </div>
        <!-- Message de chargement -->
        <div id="loadingMessage" style="display: none; text-align: center; margin-top: 20px;">
          <p><strong>Envoi en cours...</strong></p>
        </div>  <!-- Fin Message de chargement -->
        <button type="submit" class=" btn-submit mt-3 mb-5 btn btn-primary btn-block w-100">Envoyer</button>
      </form>

      <!--div class="mb-5" id="message" style="margin-top:20px;color:green;"></div-->  <!--div utilisé précedenmment pour afficher un message -->
    </div>
    <div class="text-center mb-5">
      <span class="copyright" title="ASA • Association des Sénégalais d'Amiens">© 2025 • Association des Sénégalais d'Amiens (ASA), Tous droits réservés</span>
    </div>
    <!--div ajouté pour avoir un décollage par le bas -->
    <div class="mb-4">
      <br>
    </div>


    <!-----------------------------------------------------------------SCRIPT JS------------------------------------------------>
    <script>
      document.getElementById('asaForm').addEventListener('submit', function(e) {
        e.preventDefault();

        // Afficher "Envoi en cours..." et désactiver le bouton pour éviter plusieurs soumissions
        const submitButton = document.querySelector('.btn-submit');
        submitButton.disabled = true;
        submitButton.textContent = "Envoi en cours, merci de patienter…";

        const form = document.getElementById('asaForm');
        const formData = new FormData(form);
        const file = formData.get("justificatif");

        const reader = new FileReader();

        reader.onload = function(event) {
          const base64Data = event.target.result.split(',')[1]; // enlever le header data:...base64,

          const data = {
            prenom: formData.get("prenom"),
            nom: formData.get("nom"),
            telephone: formData.get("telephone"),
            email: formData.get("email"),
            commentaires: formData.get("commentaires"),
            consentement: formData.get("consentement"),
            justificatif: {
              name: file.name,
              type: file.type,
              data: base64Data
            }
          };
       
          google.script.run
          .withSuccessHandler(function(response) {
            //window.location.href = "confirmation"; // Redirection vers confirmation.html
            window.location.href = "https://eso0-o.github.io/Asa/confirmation";
          })
          .withFailureHandler(function(error) {
            submitButton.disabled = false;
            submitButton.textContent = "Envoyer";
            alert("Erreur : " + error.message);
          })
          .uploadFile(data);

        };

        reader.readAsDataURL(file);
      });

      // Met la première lettre de chaque mot en majuscule
      const prenomInput = document.getElementById("prenom");

      prenomInput.addEventListener("input", function () {
        this.value = this.value
          .toLowerCase()
          .split(' ')
          .map(word =>
            word
              .split('-') // pour les noms composés
              .map(part => part.charAt(0).toUpperCase() + part.slice(1))
              .join('-')
          )
          .join(' ');
      });

      // Mise en majuscules du nom automatiquement
      const nameInput = document.getElementById("nom");

      nameInput.addEventListener("input", function () {
        this.value = this.value.toUpperCase();
      });

    </script>

  </body>
</html>
